// site/pages/_blog.scss
@use "../../settings" as *;
@use "../../tools" as *;

.p-blog {
    &__header {
        text-align: center;
        margin-bottom: var(--spacing-2xl);
        position: relative;

        &::before {
            content: "";
            position: absolute;
            inset: 0;
            background: var(--site-gradient-surface);
            opacity: 0.05;
            z-index: -1;
            border-radius: var(--site-radius-lg);
        }

        &-title {
            @include font-size("4xl", true);
            color: var(--color-text);
            margin-bottom: var(--spacing-lg);
            @include transition(color);
        }

        &-description {
            max-width: 720px;
            margin: 0 auto;
            color: var(--color-text-muted);
            @include transition(color);
        }
    }

    &__grid {
        display: grid;
        gap: var(--spacing-xl);

        @include media-up("lg") {
            grid-template-columns: 2fr 1fr;
        }
    }

    &__main {
        .c-card {
            background: var(--color-surface);
            border-radius: var(--site-radius-lg);
            border: 1px solid var(--color-border);
            overflow: hidden;
            @include transition(background-color, transform, border-color);

            [data-theme="light"] & {
                box-shadow: var(--site-shadow);
            }

            [data-theme="dark"] & {
                box-shadow: var(--site-shadow-lg);
            }

            &:hover {
                transform: translateY(-4px);
                border-color: var(--color-accent);
            }

            &__image {
                aspect-ratio: 16/9;
                object-fit: cover;
                width: 100%;

                [data-theme="dark"] & {
                    filter: brightness(0.8) contrast(1.2);
                }
            }

            &__body {
                padding: var(--spacing-lg);
            }

            &__meta {
                display: flex;
                gap: var(--spacing-sm);
                margin-bottom: var(--spacing-sm);
                color: var(--color-text-muted);
                @include font-size("sm");
                @include transition(color);
            }

            &__title {
                @include font-size("2xl");
                color: var(--color-text);
                margin-bottom: var(--spacing-sm);
                @include transition(color);

                a {
                    color: inherit;
                    text-decoration: none;

                    &:hover {
                        color: var(--color-accent);
                    }
                }
            }

            &__excerpt {
                color: var(--color-text-muted);
                margin-bottom: var(--spacing-md);
                @include transition(color);
            }

            &__tags {
                display: flex;
                gap: var(--spacing-xs);
                flex-wrap: wrap;
            }
        }
    }

    &__sidebar {
        .widget {
            background: var(--color-surface);
            border-radius: var(--site-radius-lg);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
            border: 1px solid var(--color-border);
            @include transition(background-color, border-color);

            [data-theme="light"] & {
                box-shadow: var(--site-shadow);
            }

            [data-theme="dark"] & {
                box-shadow: var(--site-shadow-lg);
            }

            &__title {
                @include font-size("xl");
                color: var(--color-text);
                margin-bottom: var(--spacing-md);
                @include transition(color);
            }

            &__content {
                color: var(--color-text-muted);
                @include transition(color);
            }

            // Categories widget
            &--categories {
                .widget__list {
                    list-style: none;
                    padding: 0;
                    margin: 0;

                    li {
                        margin-bottom: var(--spacing-xs);

                        &:last-child {
                            margin-bottom: 0;
                        }

                        a {
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            color: var(--color-text-muted);
                            text-decoration: none;
                            padding: var(--spacing-xs);
                            border-radius: var(--site-radius);
                            @include transition(color, background-color);

                            &:hover {
                                color: var(--color-accent);
                                background: var(--color-surface-hover);
                            }

                            span {
                                @include font-size("sm");
                                background: var(--color-surface-hover);
                                padding: 2px 8px;
                                border-radius: var(--site-radius-full);
                                @include transition(background-color);
                            }
                        }
                    }
                }
            }

            // Tags widget
            &--tags {
                .widget__tags {
                    display: flex;
                    flex-wrap: wrap;
                    gap: var(--spacing-xs);

                    a {
                        display: inline-block;
                        padding: var(--spacing-xs) var(--spacing-sm);
                        background: var(--color-surface-hover);
                        color: var(--color-text-muted);
                        border-radius: var(--site-radius-full);
                        text-decoration: none;
                        @include font-size("sm");
                        @include transition(color, background-color);

                        &:hover {
                            color: var(--color-accent);
                            background: var(--color-surface);
                        }
                    }
                }
            }

            // Search widget
            &--search {
                .widget__search {
                    position: relative;

                    input {
                        width: 100%;
                        padding: var(--spacing-sm);
                        padding-right: var(--spacing-xl);
                        background: var(--color-surface-hover);
                        border: 1px solid var(--color-border);
                        border-radius: var(--site-radius);
                        color: var(--color-text);
                        @include transition(
                            background-color,
                            border-color,
                            color
                        );

                        &:focus {
                            border-color: var(--color-accent);
                            outline: none;
                        }

                        &::placeholder {
                            color: var(--color-text-muted);
                        }
                    }

                    button {
                        position: absolute;
                        right: var(--spacing-sm);
                        top: 50%;
                        transform: translateY(-50%);
                        background: none;
                        border: none;
                        color: var(--color-text-muted);
                        cursor: pointer;
                        @include transition(color);

                        &:hover {
                            color: var(--color-accent);
                        }
                    }
                }
            }
        }
    }

    &__pagination {
        margin-top: var(--spacing-xl);
    }

    // Animation variants
    &--animate {
        .c-card {
            opacity: 0;
            animation: fade-in 0.5s ease-out forwards;

            @for $i from 1 through 10 {
                &:nth-child(#{$i}) {
                    animation-delay: #{$i * 0.1}s;
                }
            }
        }

        .widget {
            opacity: 0;
            animation: slide-in 0.5s ease-out forwards;

            @for $i from 1 through 5 {
                &:nth-child(#{$i}) {
                    animation-delay: #{$i * 0.1 + 0.3}s;
                }
            }
        }
    }
}

@keyframes fade-in {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slide-in {
    from {
        opacity: 0;
        transform: translateX(20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}
