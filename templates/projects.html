{% extends "base.html" %} {% block content %}
<div
    class="p-projects{% if page.extra.animate %} p-projects--animate{% endif %}"
>
    <div class="o-container o-container--content">
        <header class="p-projects__header">
            <h1 class="p-projects__header-title">{{ page.title }}</h1>
            {% if page.description %}
            <div class="p-projects__header-description">
                {{ page.description | markdown | safe }}
            </div>
            {% endif %}
        </header>

        {% if config.extra.project_categories %}
        <div class="p-projects__filters">
            <button
                class="c-button c-button--ghost is-active"
                data-filter="all"
            >
                All Projects
            </button>
            {% for category in config.extra.project_categories %}
            <button
                class="c-button c-button--ghost"
                data-filter="{{ category | slugify }}"
            >
                {{ category }}
            </button>
            {% endfor %}
        </div>
        {% endif %}

        <div class="p-projects__grid">
            {% for project in config.extra.projects %}
            <article
                class="p-projects__card"
                data-category="{{ project.category | slugify }}"
            >
                {% if project.image %}
                <div class="p-projects__card-image-wrapper">
                    <img
                        src="{{ project.image }}"
                        alt="{{ project.title }}"
                        class="p-projects__card-image"
                        loading="lazy"
                    />
                </div>
                {% endif %}

                <div class="p-projects__card-content">
                    {% if project.category %}
                    <div class="p-projects__card-category">
                        {{ project.category }}
                    </div>
                    {% endif %}

                    <h2 class="p-projects__card-title">{{ project.title }}</h2>

                    {% if project.description %}
                    <p class="p-projects__card-description">
                        {{ project.description }}
                    </p>
                    {% endif %} {% if project.tags %}
                    <div class="p-projects__card-tags">
                        {% for tag in project.tags %}
                        <span class="c-badge c-badge--secondary c-badge--sm">
                            {{ tag }}
                        </span>
                        {% endfor %}
                    </div>
                    {% endif %}

                    <div class="p-projects__card-links">
                        {% if project.url %}
                        <a
                            href="{{ project.url }}"
                            class="c-button c-button--primary"
                            target="_blank"
                            rel="noopener noreferrer"
                        >
                            <span class="c-button__icon c-button__icon--left">
                                <svg
                                    width="20"
                                    height="20"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                >
                                    <path
                                        d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                                    ></path>
                                    <polyline
                                        points="15 3 21 3 21 9"
                                    ></polyline>
                                    <line x1="10" y1="14" x2="21" y2="3"></line>
                                </svg>
                            </span>
                            View Project
                        </a>
                        {% endif %} {% if project.github %}
                        <a
                            href="{{ project.github }}"
                            class="c-button c-button--ghost"
                            target="_blank"
                            rel="noopener noreferrer"
                        >
                            <span class="c-button__icon c-button__icon--left">
                                <svg
                                    width="20"
                                    height="20"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                >
                                    <path
                                        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"
                                    ></path>
                                </svg>
                            </span>
                            Source Code
                        </a>
                        {% endif %}
                    </div>
                </div>
            </article>
            {% endfor %}
        </div>

        {% if page.content %}
        <div class="p-projects__content c-content">
            {{ page.content | safe }}
        </div>
        {% endif %}
    </div>
</div>

{% if config.extra.features.cta %}
<section class="p-projects__cta">
    <div class="o-container o-container--narrow">
        <div class="c-card c-card--glass">
            <div class="c-card__body">
                <h2 class="c-card__title">{{ config.extra.cta.title }}</h2>
                <p class="c-card__text">{{ config.extra.cta.description }}</p>
                <div class="c-card__actions">
                    <a
                        href="{{ config.extra.cta.button_url }}"
                        class="c-button c-button--primary"
                    >
                        {{ config.extra.cta.button_text }}
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}

<script>
    // Project filtering functionality
    document.addEventListener("DOMContentLoaded", function () {
        const filterButtons = document.querySelectorAll("[data-filter]");
        const projects = document.querySelectorAll(".p-projects__card");

        filterButtons.forEach((button) => {
            button.addEventListener("click", () => {
                // Remove active class from all buttons
                filterButtons.forEach((btn) =>
                    btn.classList.remove("is-active"),
                );
                // Add active class to clicked button
                button.classList.add("is-active");

                const filterValue = button.getAttribute("data-filter");

                projects.forEach((project) => {
                    if (filterValue === "all") {
                        project.classList.remove("is-filtered-out");
                    } else {
                        const projectCategory =
                            project.getAttribute("data-category");
                        if (projectCategory === filterValue) {
                            project.classList.remove("is-filtered-out");
                        } else {
                            project.classList.add("is-filtered-out");
                        }
                    }
                });
            });
        });
    });
</script>
{% endblock %}
